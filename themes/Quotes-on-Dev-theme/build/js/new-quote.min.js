jQuery(function(e){const t=e(".home-quotes");let o="",s="";e(".new-quote-button").on("click",function(u){u.preventDefault(),t.text(""),e.ajax({method:"GET",url:qod_vars.rest_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",qod_vars.wpapi_nonce)}}).done(function(e){""!==e[0]._qod_quote_source_url&&""!==e[0]._qod_quote_source?(o=`<a class="quote-source-url" href="${e[0]._qod_quote_source_url}">\n                <span class="quote-source">${e[0]._qod_quote_source} </span></a>`,s=","):""===e[0]._qod_quote_source_url&&""!==e[0]._qod_quote_source?(o=`<span class="quote-source">${e[0]._qod_quote_source} </span>`,s=","):(o="",s=""),t.html(`<div class="quote-para">${e[0].content.rendered}</div>\n            <div class="entry-meta">\n                <div class="quote-author"> - ${e[0].title.rendered}</div>\n                ${s}${o}\n            </div>`),history.pushState(e,"",qod_vars.home_url+"/"+e[0].slug)})});const u=e(".quote-submission-form");u.on("submit",function(t){t.preventDefault();const o=e("#author").val(),s=e("#quote").val(),r=e("#source").val(),n=e("#source-url").val(),a=e("#error-message"),c=e("#success-message");if(""===o||""===s)u.trigger("reset"),a.fadeIn().html("The quote was not submitted. Please fill in the required fields."),setTimeout(function(){a.fadeOut()},2e3);else{const t={title:o,content:s,_qod_quote_source:r,_qod_quote_source_url:n,post_status:"pending"};e.ajax({method:"POST",url:qod_vars.rest_url+"wp/v2/posts",data:t,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",qod_vars.wpapi_nonce)}}).done(function(){u.trigger("reset"),c.fadeIn().html("The quote submitted successfully!"),setTimeout(function(){c.fadeOut()},2e3)})}})});