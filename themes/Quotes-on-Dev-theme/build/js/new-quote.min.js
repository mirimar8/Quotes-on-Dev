jQuery(function(e){let t=e(".home-quotes");e(".new-quote-button").on("click",function(o){o.preventDefault(),t.text(""),e.ajax({method:"GET",url:qod_vars.rest_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",qod_vars.wpapi_nonce)}}).done(function(e){console.log(e),t.html(`<div class="quote-para">${e[0].content.rendered}</div> <div class="quote-author">${e[0].title.rendered}</div><span class="quote-source"> ${e[0]._qod_quote_source}</span> `),history.pushState(e,"",e[0].slug)})});let o=e(".quote-submission-form");o.on("submit",function(t){t.preventDefault();let s=e("#author").val(),u=e("#quote").val(),n=e("#source").val(),r=e("#source-url").val(),a=e("#error-message"),l=e("#success-message");if(""==s||""==u)o.trigger("reset"),a.fadeIn().html("The quote wasn't submitted. Please fill in the required fields."),setTimeout(function(){a.fadeOut()},2e3);else{const t={title:s,content:u,_qod_quote_source:n,_qod_quote_source_url:r,post_status:"pending"};e.ajax({method:"POST",url:qod_vars.rest_url+"wp/v2/posts",data:t,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",qod_vars.wpapi_nonce)}}).done(function(e){console.log("posted"),o.trigger("reset"),l.fadeIn().html("Quote submitted successfully!"),setTimeout(function(){l.fadeOut()},2e3)})}})});